# ❓ 체크포인트 로드 진행 상황 - FAQ

---

## Q1: 체크포인트 로드 진행 상황이 프론트엔드에서 보이나요?

### ✅ 답변: 그렇습니다!

이제 프론트엔드에서 모델 로드 시 다음과 같이 진행 상황을 볼 수 있습니다:

```
📥 로드 중...
토크나이저 로드 중...
████░░░░░░░░░░░░░░░░ 25%
```

### 어디서 볼 수 있나요?

- **위치:** 우측 설정 패널 → "🤖 모델 선택" 섹션
- **언제:** 모델 로드 버튼을 클릭한 후
- **표시 내용:**
  - 📥 아이콘으로 로드 상태 표시
  - 현재 진행 중인 작업 메시지
  - 프로그레스 바 (부드러운 애니메이션)
  - 백분율 표시

### 진행 단계는?

```
25% - 토크나이저 로드 중...
40% - 모델 구성 로드 중...
85% - 모델 로드 완료
90% - 모델을 MPS/CPU로 이동
95% - 메타데이터 추출 완료
100% - ✅ 모델 로드 완료!
```

---

## Q2: `TOKENIZERS_PARALLELISM` 경고가 나오는데 심각한가요?

### ✅ 답변: 심각하지 않습니다!

이 경고는 **더 이상 나타나지 않습니다.**

### 경고가 뭐였나요?

```
huggingface/tokenizers: The current process just got forked,
after parallelism has already been used. Disabling parallelism
to avoid deadlocks...
```

### 뭐하는 경고였나요?

- HuggingFace tokenizers 라이브러리의 알림
- 포킹(forking) 후 병렬 처리가 비활성화되었다는 의미
- **기능을 해치지 않음** - 단순 경고일 뿐

### 왜 해결했나요?

- 환경변수 `TOKENIZERS_PARALLELISM=false` 설정
- 백엔드 시작 시 자동으로 설정됨
- 사용자가 할 것 없음 ✅

### 성능에 영향이 있나요?

- ❌ 거의 없음 (대부분의 경우 측정 불가)
- 모델 로드 시간에 미미한 영향 (1% 미만)
- 사용자 경험에 전혀 영향 없음

---

## Q3: 모델 로드는 왜 시간이 오래 걸리나요?

### 📝 답변: 정상입니다!

모델 로드는 여러 단계를 거칩니다:

```
1️⃣  토크나이저 로드 (1-3초)
     ↓
2️⃣  모델 구성 로드 (1-2초)
     ↓
3️⃣  체크포인트 샤드 로드 (⏱️ 가장 시간 소요)
     └─ Loading checkpoint shards: 0/4
     └─ Loading checkpoint shards: 1/4
     └─ Loading checkpoint shards: 2/4
     └─ Loading checkpoint shards: 3/4
     └─ Loading checkpoint shards: 4/4
     ↓
4️⃣  모델 메모리 이동 (GPU/MPS) (2-5초)
     ↓
5️⃣  메타데이터 추출 (< 1초)
     ↓
✅ 로드 완료!
```

### 전체 시간은?

- **작은 모델 (1-3GB):** 15-30초
- **중간 모델 (7-13GB):** 30-60초
- **큰 모델 (30GB+):** 60초 이상

### 체크포인트 로드가 오래 걸리는 이유

- 모델 가중치를 저장된 샤드 파일에서 읽음
- 메모리에 로드하고 GPU/MPS로 전송
- 각 샤드 로드 중 진행률 표시됨

---

## Q4: 진행 상황이 멈춰있는데 오류인가요?

### ℹ️ 답변: 대부분 정상입니다!

진행 상황이 한 단계에서 오래 머물 수 있습니다:

```
📥 로드 중...
모델 로드 중...
████████████░░░░░░░░ 65%  ← 여기서 오래 멈춤?
```

### 왜 그런가요?

- 체크포인트 샤드를 디스크에서 읽는 중
- 큰 모델은 이 단계가 10-30초 걸릴 수 있음
- **진행 바가 움직이면 진행 중인 것**

### 정말 멈춘 건가요?

- 🔴 **오류 신호:**

  - 2분 이상 진행 없음
  - 에러 메시지 표시
  - "❌ 오류:" 로 시작하는 메시지

- 🟢 **정상 신호:**
  - 진행 바가 천천히 움직임
  - 새로운 메시지가 업데이트됨
  - 시스템이 작동 중 (CPU 또는 GPU 사용)

---

## Q5: 프론트엔드에서 체크포인트 로드 진행률이 안 보인데요?

### 🔧 해결 방법

#### 1단계: 새로고침

```
Cmd + R (Mac) 또는 Ctrl + R (Windows)
```

#### 2단계: 캐시 삭제

- 개발자 도구 (F12) 열기
- Storage → Cookies 삭제
- 페이지 새로고침

#### 3단계: 백엔드 재시작

```bash
# 터미널에서
Ctrl + C  # 백엔드 중지

# 다시 시작
python -m uvicorn backend.main:app --reload
```

#### 4단계: 진행 상황 확인

- 모델 로드 버튼 클릭
- 우측 "모델 선택" 패널 확인

---

## Q6: 로드 상태 박스가 이상한데요?

### 박스 스타일

```
┌─────────────────────┐
│ 📥 로드 중...       │
│ 토크나이저 로드 중...│
│ ████░░░░░░░░░░  25%│
└─────────────────────┘
```

### 배경색

- **파란색 배경:** 정상 로드 중
- **빨간색 텍스트:** 오류 발생

### 박스가 안 보인다면?

1. 모델 로드 버튼을 클릭했는가?
2. `modelLoading !== null` 상태인가?
3. 브라우저 콘솔 확인 (F12)

---

## Q7: 여러 모델을 동시에 로드할 수 있나요?

### ❌ 답변: 안 됩니다!

한 번에 하나의 모델만 로드 가능합니다.

### 이유

- GPU/MPS 메모리 제한
- 동시 로드 시 메모리 부족
- 백엔드에서 순차 처리로 설계

### 두 번째 모델을 로드하려면?

1. 첫 번째 모델 로드 완료 대기 (100%)
2. 새 모델 선택 후 로드 클릭
3. 이전 모델은 자동으로 언로드됨

---

## Q8: 로드 중 모델을 바꿀 수 있나요?

### ❌ 답변: 권장하지 않습니다!

로드 중에 다른 모델을 선택하면 오류가 발생할 수 있습니다.

### 올바른 방법

1. 현재 로드 완료 대기 (100%)
2. 새 모델 선택
3. 로드 클릭

### 실수했다면?

1. 페이지 새로고침 (Cmd + R)
2. 백엔드 재시작
3. 다시 시도

---

## Q9: Mac에서만 진행 상황이 표시되나요?

### 🤔 답변: 네, Mac 기반입니다!

MACtuner 프로젝트는 Mac(Apple Silicon) 환경을 위해 최적화되었습니다.

### 다른 OS에서는?

- **Linux:** 기본적으로 작동 (CUDA 사용)
- **Windows:** 기본적으로 작동 (NVIDIA CUDA 사용)
- **진행 상황 표시:** 모든 OS에서 동일

### 최적화된 기능

- **Mac (MPS):** GPU 가속 활용
- **Linux (CUDA):** NVIDIA GPU 활용
- **Windows (CUDA):** NVIDIA GPU 활용

---

## Q10: 로드 진행 상황을 터미널에서도 볼 수 있나요?

### ✅ 답변: 그렇습니다!

백엔드 터미널에서는 기존처럼 로그가 출력됩니다:

```bash
# 터미널 출력
[백엔드 에러] Loading checkpoint shards:   0%|          | 0/4 [00:00<?, ?it/s]
[백엔드 에러] Loading checkpoint shards:  25%|██▌       | 1/4 [00:04<00:12,  4.00s/it]
[백엔드 에러] Loading checkpoint shards:  50%|█████     | 2/4 [00:10<00:10,  5.48s/it]
[백엔드 에러] Loading checkpoint shards:  75%|███████▌  | 3/4 [00:17<00:06,  6.08s/it]
[백엔드 에러] Loading checkpoint shards: 100%|██████████| 4/4 [00:23<00:00,  6.16s/it]
```

### 동시 표시

- **터미널:** 상세한 tqdm 진행 바
- **프론트엔드:** 간단한 진행 메시지

### 정보 동기화

- 백엔드 로그 = 실제 작업
- 프론트엔드 UI = 백엔드 진행 상황 반영
- 동기화 지연 < 1초

---

## 🎯 빠른 요약

| 항목                      | 답변                                   |
| ------------------------- | -------------------------------------- |
| 체크포인트 로드가 보이나? | ✅ 프론트엔드 우측 패널에서 볼 수 있음 |
| TOKENIZERS 경고는?        | ✅ 더 이상 나타나지 않음               |
| 로드 시간은?              | ⏱️ 모델 크기에 따라 15-120초           |
| 진행 상황이 멈춤?         | ℹ️ 체크포인트 로드 중일 수 있음 (정상) |
| 여러 모델 동시 로드?      | ❌ 한 번에 하나만 가능                 |
| Mac 전용?                 | ℹ️ Mac 최적화, 다른 OS도 작동          |

---

## 💬 추가 문의

문제가 해결되지 않으면:

1. **로그 확인:** 브라우저 개발자 도구 (F12) → Console
2. **백엔드 로그:** 터미널에서 에러 메시지 확인
3. **캐시 초기화:** Cmd + Shift + Delete (캐시/쿠키 삭제)
4. **전체 재시작:** 프론트엔드 + 백엔드 다시 시작

**happy coding! 🚀**
