# 🎨 포트 색상 및 상호작용 가이드

## 📊 포트 색상 시스템

모든 포트는 데이터 타입에 따라 색상으로 구분됩니다.

### 기본 색상 (평시)

| 타입 | 색상 | 역할 |
|------|------|------|
| **Model** | 🔵 파란색 (`bg-blue-400`) | 모델 데이터 흐름 |
| **Dataset** | 🟢 초록색 (`bg-green-400`) | 데이터셋 흐름 |
| **Token** | 🟣 보라색 (`bg-purple-400`) | 인증 토큰 / 설정 |
| **Config** | 🟣 보라색 (`bg-purple-400`) | 설정 정보 |

---

## 🎯 포트 상호작용 상태

### 1. 정상 상태 (연결 안 함)

```
🟦 Model Port
  크기: 4x4px
  색상: 파란색
  호버: 명도 증가 + 그림자
  제목: "클릭 & 드래그로 연결"
```

### 2. 드래그 중 - 호버 (연결 가능)

```
🟩 Target Port ✨
  크기: 4x4px (expanded)
  색상: 초록색 + pulse 애니메이션
  깜빡임: 0.5초 간격으로 밝기 변화
  제목: "✅ 여기에 연결하면 됩니다!"
  그림자: 초록색 발광
```

### 3. 드래그 중 - 호버 (연결 불가)

```
🔴 Invalid Target
  크기: 4x4px
  색상: 빨강색
  제목: "❌ 연결 불가능"
  그림자: 빨강색
```

---

## 💡 사용자 경험 플로우

### 노드 연결 과정

```
Step 1: 포트 확인 (평시)
┌─────────────────────────┐
│ 🔑 HF Token         🟣  │  ← 보라색 동그라미 (4x4)
├─────────────────────────┤
│ (토큰 설정)             │
└─────────────────────────┘

Step 2: 포트 호버 (아무것도 안 함)
┌─────────────────────────┐
│ 🔑 HF Token         🟣  │  ← 호버 시 크기 확대
│                  (확대됨)│     & 그림자 추가
└─────────────────────────┘

Step 3: 포트 클릭 & 드래그 시작
🟣 ─────────────────────── ↦  (황금색 점선, pulse 애니메이션)

Step 4: 대상 포트 호버 (연결 가능)
┌─────────────────────────┐
│ 🤖 Model Loader         │
├─────────────────────────┤
│ 🟩 (초록색) ✨ ✅      │  ← pulse 깜빡임!
│ "✅ 여기에 연결하면 됩니다!"
│ (그림자: 초록색)        │
└─────────────────────────┘

Step 5: 마우스 업 (연결 완료)
🟣 ════════════════════════ 🟩  (정식 연결선 생성)
```

---

## 🎨 포트 크기 비교

```
이전 (너무 작음):
  ●  2.5x2.5px

이후 (적절함):
  ●  4x4px (기본)
  ◉  ~6x6px (호버 시 scale-150 = 4*1.5 = 6px)
```

---

## 🌊 애니메이션 효과

### 포트 호버 (항상)
```
크기: 4px → 6px (scale-150)
그림자: 기본 → 색상별 발광
전환: 100ms ease-out
```

### 연결 가능 상태 (드래그 중)
```
✨ Pulse Animation
  • 밝기: 100% → 60% → 100%
  • 주기: 0.5초
  • 효과: `animate-pulse` (Tailwind)
```

---

## 💻 코드 구현

### 포트 색상 결정 로직

```typescript
// 포트 데이터타입에 따른 기본 색상
let defaultColor = "bg-blue-400";
let hoverShadow = "group-hover:shadow-blue-400";

if (port.dataType === "token" || port.dataType === "config") {
  defaultColor = "bg-purple-400";
  hoverShadow = "group-hover:shadow-purple-400";
} else if (port.dataType === "dataset") {
  defaultColor = "bg-green-400";
  hoverShadow = "group-hover:shadow-green-400";
} else if (port.dataType === "model") {
  defaultColor = "bg-blue-400";
  hoverShadow = "group-hover:shadow-blue-400";
}

// 상호작용 상태에 따른 색상 변경
const bgColor = isHovered && canConnect 
  ? "bg-green-500 animate-pulse"    // ✅ 연결 가능 = 초록색 + pulse
  : isHovered && !canConnect 
  ? "bg-red-500"                    // ❌ 연결 불가 = 빨강색
  : defaultColor;                   // 기본 = 타입별 색상
```

### 포트 렌더링

```typescript
<div
  className={`w-4 h-4 ${bgColor} rounded-full 
    group-hover:scale-150 group-hover:shadow-lg ${shadowColor} 
    transition-all duration-100`}
  onMouseEnter={() => onPortMouseEnter?.(node.id, port.id)}
  onMouseLeave={() => onPortMouseLeave?.()}
  onMouseUp={() => onPortMouseUp?.(node.id, port.id)}
  title={`${isHovered && canConnect ? "✅ 여기에 연결하면 됩니다!" : "..."}`}
/>
```

---

## 🚀 실제 사용 예시

### 예시 1: 토큰 노드에서 모델 로더로 연결

```
1. 🔑 HF Token 노드의 🟣 보라색 포트 클릭
   └─ 황금색 점선 표시 (실시간 따라옴)

2. 🤖 Model Loader 노드의 입력 포트 호버
   ├─ 포트 색상: 파란색 → 초록색 (Pulse ✨)
   ├─ 그림자: 초록색 발광
   └─ 제목: "✅ 여기에 연결하면 됩니다!"

3. 마우스 업
   └─ 🟣 ════🟢 (정식 연결선 생성)
      🟣 보라색 (토큰)
      🟢 초록색 (연결 완료)
```

### 예시 2: 모델 로더에서 학습 노드로 연결

```
1. 🤖 Model Loader의 🔵 파란색 포트 (모델 출력)
   └─ 드래그 시작

2. 🎓 Training 노드의 입력 포트 호버
   ├─ 포트 색상: 노란색 → 초록색 (Pulse)
   └─ "✅ 여기에 연결하면 됩니다!"

3. 마우스 업
   └─ 🔵 ════🟢 (파란색 연결선)
```

---

## 📋 색상 대응표

### 포트 ↔ 연결선 색상 일치

| 포트 타입 | 포트 색상 | 연결선 색상 |
|----------|---------|----------|
| Model | 🔵 파란색 | 🔵 파란색 |
| Dataset | 🟢 초록색 | 🟢 초록색 |
| Token | 🟣 보라색 | 🟡 노란색 |

---

## ✨ 개선사항 요약

### 이전
```
❌ 포트가 너무 작음 (2.5x2.5px)
❌ 회색으로만 구분 (색상 정보 부족)
❌ 호버 상태 불명확
❌ "여기에 연결해도 된다" 신호 없음
```

### 이후
```
✅ 포트가 적절함 (4x4px, 호버 시 6x6px)
✅ 타입별 색상 구분 (파란색, 초록색, 보라색)
✅ 호버 상태 명확 (크기↑, 그림자↑, 색상 변화)
✅ 연결 가능 신호 (초록색 + pulse 애니메이션)
✅ 연결 불가 신호 (빨강색)
```

---

## 🎯 UI/UX 최적화

### 시각적 계층

```
기본 (평시):
  • 포트 크기: 4x4
  • 투명도: 100%
  • 광선: 없음

호버 (마우스 오버):
  • 포트 크기: 6x6 (150%)
  • 투명도: 100%
  • 광선: 색상별 그림자

드래그 중 (연결 진행):
  • 포트 크기: 6x6
  • 투명도: 100%
  • 광선: 강한 그림자
  • 애니메이션: pulse
```

### 인터랙션

```
마우스 진입:
  - 크기 확대 (즉시)
  - 그림자 나타남 (즉시)
  - 제목 표시 (즉시)

드래그 시작:
  - 연결선 생성 (황금색 점선)
  - 마우스 추적 (실시간)

대상 호버:
  - 포트 색상 변경 (초록색 또는 빨강색)
  - Pulse 애니메이션 시작
  - 제목 업데이트 (✅ 또는 ❌)

마우스 해제:
  - 정식 연결선 저장 (또는 취소)
  - 상태 초기화
```

---

**마지막 업데이트**: 2025-11-08  
**상태**: ✅ 포트 색상 및 상호작용 시스템 완성  
**버전**: 8.0.0

